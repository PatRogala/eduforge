-# app/views/courses/show.html.haml (Public Course Show Page)

-# --- Sample Data (Replace with @course variable later) ---
- course_description = "<p>Unlock the power of non-blocking I/O in Ruby. Learn practical techniques using Fibers, Async gem, and concurrent patterns to build high-performance applications.</p><p>This microlearning course breaks down complex concepts into digestible lessons, perfect for busy developers.</p>" # HTML for rich text
- instructor_name = "Yukihiro Matsumoto"
- instructor_avatar_url = "https://placehold.co/100x100/cbd5e1/475569?text=YM"
- lesson_count = 15
- total_duration_estimate = "Approx. 2.5 hours"
- course_level = "Intermediate"
- course_price = "$49.99" 


-# --- Main Page Container ---
%main.py-8.px-4{ class: "sm:px-6 lg:px-8 bg-gray-50 min-h-screen rounded-lg" }
  .mx-auto.max-w-7xl

    -# --- Layout Grid ---
    .lg:grid.lg:grid-cols-3.lg:gap-x-8.xl:gap-x-12
      
      -# --- Left Column (Main Content) ---
      .lg:col-span-2.space-y-8
        
        -# Course Header: Image & Title
        %section
          %div.aspect-video.overflow-hidden.rounded-lg.shadow-lg.mb-6
            = image_tag @course.cover_image, class: "w-full h-full object-cover"
          %h1.text-3xl.font-bold.tracking-tight.text-gray-900{ class: "sm:text-4xl" }= @course.title

        -# Description Section
        %section.bg-white.p-6.rounded-lg.shadow-sm.ring-1{class: "ring-gray-900/5"}
          %h2.text-xl.font-semibold.text-gray-800.mb-4.flex.items-center.gap-2
            = lucide_icon 'file-text', class: 'w-5 h-5 text-blue-600'
            = t('.about_this_course')
          .prose.prose-sm.sm:prose.max-w-none.text-gray-700= @course.description

        -# Syllabus / Course Content Section
        %section.bg-white.p-6.rounded-lg.shadow-sm.ring-1{class: "ring-gray-900/5"}
          %h2.text-xl.font-semibold.text-gray-800.mb-5.flex.items-center.gap-2
            = lucide_icon 'list-checks', class: 'w-5 h-5 text-blue-600'
            = t('.what_will_you_learn')
          
          -# Placeholder for Chapters/Lessons Structure
          .space-y-5
            -# Example Chapter 1 (Placeholder)
            %div.border.border-gray-200.rounded-md.p-4
              %h3.font-medium.text-gray-900.flex.items-center.gap-2.mb-3
                = lucide_icon 'folder-open', class: 'w-4 h-4 text-gray-400'
                Chapter 1: Introduction to Concurrency
              %ul.space-y-2.pl-6.text-sm.text-gray-600
                %li.flex.items-center.gap-2
                  = lucide_icon 'play-circle', class: 'w-4 h-4 text-blue-500'
                  Lesson 1.1: Why Async? (Video - 5 min)
                %li.flex.items-center.gap-2
                  = lucide_icon 'file-text', class: 'w-4 h-4 text-green-500'
                  Lesson 1.2: Blocking vs Non-Blocking I/O (Reading)
                %li.flex.items-center.gap-2
                  = lucide_icon 'zap', class: 'w-4 h-4 text-yellow-500'
                  Lesson 1.3: Quick Quiz

            -# Example Chapter 2 (Placeholder)
            %div.border.border-gray-200.rounded-md.p-4
              %h3.font-medium.text-gray-900.flex.items-center.gap-2.mb-3
                = lucide_icon 'folder-open', class: 'w-4 h-4 text-gray-400'
                Chapter 2: Ruby Fibers Deep Dive
              %ul.space-y-2.pl-6.text-sm.text-gray-600
                %li.flex.items-center.gap-2
                  = lucide_icon 'play-circle', class: 'w-4 h-4 text-blue-500'
                  Lesson 2.1: Understanding Fibers (Video - 8 min)
                %li.flex.items-center.gap-2
                  = lucide_icon 'code', class: 'w-4 h-4 text-purple-500'
                  Lesson 2.2: Practical Fiber Example (Code Exercise)
            
            %p.text-center.text-sm.text-gray-500.pt-4 ... and #{lesson_count - 4} more lessons!

      -# --- Right Column (Sticky Info Box) ---
      .mt-8.lg:mt-0.lg:col-span-1
        %aside.lg:sticky.lg:top-8.space-y-6
          
          -# Enroll / Buy Box
          .bg-white.p-6.rounded-lg.shadow-lg.ring-1.text-center{class: "ring-gray-900/5"}
            - if course_price
              %p.text-3xl.font-bold.text-gray-900.mb-4= course_price
            - else
              %p.text-xl.font-semibold.text-gray-900.mb-4 Get Started Now!

            -# --- ENROLLMENT PLACEHOLDER ---
            %div.py-4.px-6.bg-yellow-50.border.border-yellow-200.rounded-md
              %p.text-sm.font-medium.text-yellow-800.flex.items-center.justify-center.gap-2
                = lucide_icon 'shopping-cart', class: 'w-4 h-4' # Or 'user-plus' for enrollment
                Enrollment / Purchase Button Here
              %p.text-xs.text-yellow-700.mt-1 (Coming Soon)
            -# Example of a real button:
            -# = link_to "#", class: "mt-6 block w-full rounded-md bg-blue-600 px-4 py-3 text-center text-base font-semibold text-white shadow-sm hover:bg-blue-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600" do
            -#   = lucide_icon 'shopping-cart', class: 'inline-block w-5 h-5 mr-2 -mt-1' # Or 'play-circle'
            -#   Buy Now / Enroll for Free

            -# Optional: Add money-back guarantee text or similar trust signals
            %p.mt-4.text-xs.text-gray-500 Lifetime access. 30-day money-back guarantee.

          -# Course Details Box
          .bg-white.p-6.rounded-lg.shadow-sm.ring-1{class: "ring-gray-900/5"}
            %h3.text-base.font-semibold.text-gray-900.mb-4= t('.course_details')
            %dl.space-y-3
              .flex.items-center.gap-2.text-sm
                %dt= lucide_icon 'layers', class: 'w-5 h-5 text-gray-400 flex-shrink-0'
                %dd.text-gray-600 #{lesson_count} Lessons
              
              .flex.items-center.gap-2.text-sm
                %dt= lucide_icon 'clock', class: 'w-5 h-5 text-gray-400 flex-shrink-0'
                %dd.text-gray-600= total_duration_estimate

              .flex.items-center.gap-2.text-sm
                %dt= lucide_icon 'bar-chart', class: 'w-5 h-5 text-gray-400 flex-shrink-0' # Or 'gauge'
                %dd.text-gray-600= course_level

              -# Add other details like "Lifetime Access", "Certificate Included" etc.
              .flex.items-center.gap-2.text-sm
                %dt= lucide_icon 'shield-check', class: 'w-5 h-5 text-gray-400 flex-shrink-0'
                %dd.text-gray-600 Full lifetime access

          -# Instructor Box
          .bg-white.p-6.rounded-lg.shadow-sm.ring-1{class: "ring-gray-900/5"}
            %h3.text-base.font-semibold.text-gray-900.mb-4= t('.instructor')
            .flex.items-center.gap-4
              %img.h-12.w-12.rounded-full.bg-gray-100{ src: instructor_avatar_url, alt: instructor_name }
              %div
                %p.text-sm.font-medium.text-gray-800= instructor_name
                -# Optional: Link to instructor profile
                %a.text-xs.text-blue-600.hover:underline{ href: "#"} View Profile