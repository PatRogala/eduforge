%header.py-4
  .flex.justify-between.items-center.px-6.lg:px-8
    -# Logo & Mobile Nav
    .flex.flex-shrink-0.items-center.space-x-5
      %button.text-neutral-500.hover:text-black.focus:outline-none.focus:ring-2.focus:ring-black.md:hidden{"data-action": "click->sidebar#toggle"}
        = lucide_icon("menu", class: "h-5 w-5")

      = link_to root_path, class: "text-lg font-bold tracking-tight text-black" do
        = t("app.name")

    -# Search Bar
    .hidden.md:flex.items-center.flex-1.justify-center.px-8
      .relative.w-full.max-w-md
        %span.absolute.inset-y-0.left-0.flex.items-center
          = lucide_icon("search", class: "text-neutral-400 h-4 w-4")
        %input.w-full.bg-transparent.border-0.border-b.border-neutral-300.pl-7.py-2.text-sm.placeholder:text-neutral-500.focus:border-black.focus:ring-0{placeholder: t(".search.placeholder"), type: "text"}/

    -# Actions
    .flex.items-center.justify-end.space-x-6
      - if logged_in?
        .relative{"data-controller": "dropdown"}
          %button.flex.items-center.rounded-full.focus:outline-none.focus:ring-2.focus:ring-offset-2.focus:ring-black{"data-action": "dropdown#toggle click@window->dropdown#hide"}
            - if user_avatar.attached?
              = image_tag user_avatar.variant(resize_to_fill: [32, 32]), class: "w-8 h-8 rounded-full"
            - else
              .w-8.h-8.rounded-full.bg-neutral-100.flex.items-center.justify-center.ring-1.ring-neutral-200
                = lucide_icon("user", class: "text-neutral-500 h-5 w-5")
          %div{"data-dropdown-target": "menu", class: "hidden"}
            = render Layout::HeaderDropdownComponent.new(current_user: current_user)
      - else
        = link_to t(".sign_in"), new_user_session_path, class: "hidden sm:inline text-sm font-medium text-neutral-600 hover:text-black"
        = link_to t(".sign_up"), new_user_registration_path, class: "rounded-full bg-black px-4 py-2 text-xs font-semibold text-white shadow-sm hover:bg-neutral-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black"
