#!/usr/bin/env bash
set -e

echo "ğŸ”’ Security checks"
bundle exec brakeman -q -o tmp/brakeman.html
bundle exec bundle audit check --update

echo "ğŸ“¦ Checking for unused gems"
bundle exec bundle clean --force

echo "ğŸ” Checking for database consistency"
bundle exec database_consistency

echo "ğŸ“ Updating annotations"
bundle exec annotaterb models

echo "ğŸ§¹ Linting Ruby code"
bundle exec rubocop -A

echo "â¡ï¸ Running tests"
bundle exec rspec

echo "âœ… All checks passed"
